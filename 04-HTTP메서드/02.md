# 2. HTTP 메서드 - GET, POST

HTTP 메소드는 쉽게 말해 `클라이언트가 서버에게 요청을 할 때 서버가 해줄 것이라 기대하는 행동`이다.

> 예) GET은 리소스를 달라, POST는 클라가 데이터를 줄 테니 서버야 처리 좀 해줘.

## HTTP 메소드 종류

### 주요 메소드

- `GET`: 리소스 조회
- `POST`: 요청 데이터 처리. 주로 등록에 사용. 클라가 반드시 데이터를 담아서 서버에게 전해줘야 한다.
- `PUT`: 리소스 대체. 해당 리소스가 없으면 생성. 클라가 보내는 데이터로 대체.(예: 폴더에 파일 넣는 것)
- `PATCH`: 리소스 부분 변경.
- `DELETE`: 리소스 삭제.

### 기타 메서드

- `HEAD`: GET과 동일하지만 메세지 부분을 제외하고 상태 줄과 헤더만 반환. (start-line이랑 header만)
- `OPTIONS`: 대상 리소스에 대한 통신 가능 옵션(메소드)을 설명(주로 CORS에서 사용) 예) pre-flight
- `CONNECT`: 대상 자원으로 식별되는 서버에 대한 터널을 설정
- `TRACE`: 대상 리소스에 대한 경로를 따라 메세지 루프백 테스트 수행

### GET

- 리소스 조회
- 서버에 전달하고 싶은 데이터는 쿼리 파라미터 등을 통해서 전달한다.
- 최근 HTTP 스펙에서는 메세지 바디를 사용해서 데이터를 전달할 수 있지만, 지원하지 않는 서버 등이 많아서 권장하지 않음

### POST

- 요청 데이터 처리
- 클라이언트가 메세지 바디를 통해 서버로 요청 데이터 전달
- 서버는 요청 데이터를 처리 -> 메세지 바디를 통해 들어온 데이터를 처리하는 모든 기능을 수행한다.
- 주로 전달된 데이터로 신규 리소스를 등록하거나 프로세스 처리에 사용한다.

요청 데이터를 어떻게 처리한다는 뜻일까

HTTP 스펙에는 POST 메소드에 대해 **대상 리소스가 리소스의 고유한 의미 체계에 따라 요청에 포함된 표현을 처리하도록 요청**합니다, 라고 적혀있다.

예를 들면

1. HTML 양식에 입력된 필드와 같은 데이터 블록을 데이터 처리 프로세스 제공
2. 게시판 글쓰기, 댓글 달기
3. 서버가 아직 식별하지 않은 새 리소스 생성(신규 주문, 회원 생성)
4. 기존 자원에 데이터 추가

등이 있고,

특정 리소스 URI에 POST 요청이 오면 요청 데이터를 어떻게 처리할지 리소스마다 따로 정해야 한다.

1. 새 리소스 생성(등록)
2. 요청 데이터 처리(결졔완료 -> 배달시작 -> 배달완료처럼 단순히 값 변경이 아닌 프로세스의 상태가 변경)
   - post의 결과로 새로운 리소스가 생성되지 않을 수도 있음
   - /orders/{orderId}/start-delivery (배달 시작. 컨트롤 URI)
3. 다른 메소드로 처리하기 애매한 경우
   - JSON으로 조회 데이터를 넘겨야 하는데, GET 메소드를 사용하기 어려운 경우(get 메소드에 메세지 바디를 지원하지 않는 서버일 때)
   - 사실 POST로는 모든 걸 할 수 있기 때문에, 애매하면 POST를 사용한다.
   - 조회할 때는 GET으로 하면 캐싱이 쉬움(POST는 조회 및 캐싱이 가능하다 어려움)

즉, CRUD에서 C를 POST로 처리하고, RUD를 제외한 모든 것을 POST로 처리하면 된다.
